apiVersion: v1
kind: Pod
metadata:
  name: test-vertex
  namespace: um
spec:
  serviceAccountName: um-vertex-ai-sa
  containers:
  - name: test
    image: google/cloud-sdk:slim
    command: ["sleep", "infinity"]
  restartPolicy: Never


    python -c '
    import vertexai
    from vertexai.generative_models import GenerativeModel
    print("--- Starting Gemini Validation ---")
    try:
        vertexai.init(project="teralivekubernetes", location="us-east1")
        print("Vertex AI initialized.")
        model = GenerativeModel("gemini-2.5-flash")
        print("Model loaded. Sending prompt...")
        response = model.generate_content("test")
        print("Response received!")
        print("\n\n✅ ✅ ✅ SUCCESS! ✅ ✅ ✅")
        print("This pod is correctly authenticated and has permission to use Gemini models.")
    except Exception as e:
        print(f"\n\n❌ ❌ ❌ FAILED ❌ ❌ ❌")
        print(f"An error occurred: {e}")
   '